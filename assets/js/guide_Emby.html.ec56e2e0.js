"use strict";(self.webpackChunkwomeng_docs=self.webpackChunkwomeng_docs||[]).push([[6],{3079(s,n,a){a.r(n),a.d(n,{comp:()=>i,data:()=>p});var e=a(641);const l={},i=(0,a(6262).A)(l,[["render",function(s,n){return(0,e.uX)(),(0,e.CE)("div",null,[...n[0]||(n[0]=[(0,e.Fv)('<h1 id="emby-伪站破解认证" tabindex="-1"><a class="header-anchor" href="#emby-伪站破解认证"><span>Emby 伪站破解认证</span></a></h1><p>创建 CA 根证书私钥</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">openssl genrsa <span class="token parameter variable">-out</span> ca.key <span class="token number">4096</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>用私钥生成 CA 根证书</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">openssl req <span class="token parameter variable">-x509</span> <span class="token parameter variable">-new</span> <span class="token parameter variable">-key</span> ca.key <span class="token parameter variable">-days</span> <span class="token number">3650</span> <span class="token parameter variable">-sha256</span> <span class="token punctuation">\\</span></span>\n<span class="line"><span class="token parameter variable">-subj</span> <span class="token string">&quot;/C=JP/ST=Japan/L=Japan/O=Emby/CN=Emby-Root-CA&quot;</span> <span class="token punctuation">\\</span></span>\n<span class="line"><span class="token parameter variable">-out</span> ca.pem</span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>创建服务器证书私钥（mb3admin.com）</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">openssl genrsa <span class="token parameter variable">-out</span> ssl.key <span class="token number">2048</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>创建 SAN 配置文件（非常关键）openssl-san.cnf</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token punctuation">[</span> req <span class="token punctuation">]</span></span>\n<span class="line">default_bits       <span class="token operator">=</span> <span class="token number">2048</span></span>\n<span class="line">prompt             <span class="token operator">=</span> no</span>\n<span class="line">default_md         <span class="token operator">=</span> sha256</span>\n<span class="line">distinguished_name <span class="token operator">=</span> dn</span>\n<span class="line">req_extensions     <span class="token operator">=</span> req_ext</span>\n<span class="line"></span>\n<span class="line"><span class="token punctuation">[</span> dn <span class="token punctuation">]</span></span>\n<span class="line">C  <span class="token operator">=</span> JP</span>\n<span class="line">ST <span class="token operator">=</span> Japan</span>\n<span class="line">L  <span class="token operator">=</span> Japan</span>\n<span class="line">O  <span class="token operator">=</span> Emby</span>\n<span class="line">CN <span class="token operator">=</span> mb3admin.com</span>\n<span class="line"></span>\n<span class="line"><span class="token punctuation">[</span> req_ext <span class="token punctuation">]</span></span>\n<span class="line">subjectAltName <span class="token operator">=</span> @alt_names</span>\n<span class="line"></span>\n<span class="line"><span class="token punctuation">[</span> alt_names <span class="token punctuation">]</span></span>\n<span class="line">DNS.1 <span class="token operator">=</span> mb3admin.com</span>\n<span class="line">DNS.2 <span class="token operator">=</span> *.mb3admin.com</span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>生成 CSR 中间文件（签名请求）</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">openssl req <span class="token parameter variable">-new</span> <span class="token parameter variable">-key</span> ssl.key <span class="token parameter variable">-out</span> ssl.csr <span class="token parameter variable">-config</span> openssl-san.cnf</span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>用 CA 根证书签名服务器 ssl 证书</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">openssl x509 <span class="token parameter variable">-req</span> <span class="token punctuation">\\</span></span>\n<span class="line"><span class="token parameter variable">-in</span> ssl.csr <span class="token punctuation">\\</span></span>\n<span class="line"><span class="token parameter variable">-CA</span> ca.pem <span class="token punctuation">\\</span></span>\n<span class="line"><span class="token parameter variable">-CAkey</span> ca.key <span class="token punctuation">\\</span></span>\n<span class="line"><span class="token parameter variable">-CAcreateserial</span> <span class="token punctuation">\\</span></span>\n<span class="line"><span class="token parameter variable">-out</span> ssl.crt <span class="token punctuation">\\</span></span>\n<span class="line"><span class="token parameter variable">-days</span> <span class="token number">825</span> <span class="token punctuation">\\</span></span>\n<span class="line"><span class="token parameter variable">-sha256</span> <span class="token punctuation">\\</span></span>\n<span class="line"><span class="token parameter variable">-extfile</span> openssl-san.cnf <span class="token punctuation">\\</span></span>\n<span class="line"><span class="token parameter variable">-extensions</span> req_ext</span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>让浏览器/客户端信任，要把根证书ca.pem导入各系统，若不导入Emby客户端会弹窗让你选择是否信任该证书<br> Windows：安装到受信任的根证书颁发机构，windows下复制ca.pem重命名为ca.crt直接双击安装<br> Android：安全 &gt; 用户凭据<br> iOS：描述文件 / 设置 → 通用 → 关于 → 证书信任</p></div><p>Linux：复制证书到 /usr/local/share/ca-certificates/ 文件下并更新证书</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token function">sudo</span> <span class="token function">cp</span> ca.crt /usr/local/share/ca-certificates/ca.pem </span>\n<span class="line"><span class="token function">sudo</span> update-ca-certificates</span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p>上面一切的前提是要重定向<code>mb3admin.com</code>到指定ip</p></div><p>Nginx 相关配置</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">server <span class="token punctuation">{</span></span>\n<span class="line">        listen <span class="token number">443</span> ssl<span class="token punctuation">;</span></span>\n<span class="line">        server_name mb3admin.com<span class="token punctuation">;</span></span>\n<span class="line">        ssl_certificate file/ssl/emby.crt<span class="token punctuation">;</span></span>\n<span class="line">        ssl_certificate_key file/ssl/emby.key<span class="token punctuation">;</span></span>\n<span class="line">        ssl_session_timeout 5m<span class="token punctuation">;</span></span>\n<span class="line">        ssl_protocols TLSv1 TLSv1.1 TLSv1.2<span class="token punctuation">;</span></span>\n<span class="line">        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:<span class="token operator">!</span>aNULL:<span class="token operator">!</span>MD5:<span class="token operator">!</span>RC4:<span class="token operator">!</span>DHE<span class="token punctuation">;</span></span>\n<span class="line">        ssl_prefer_server_ciphers on<span class="token punctuation">;</span></span>\n<span class="line">        add_header Access-Control-Allow-Origin *<span class="token punctuation">;</span></span>\n<span class="line">        add_header Access-Control-Allow-Headers *<span class="token punctuation">;</span></span>\n<span class="line">        add_header Access-Control-Allow-Method *<span class="token punctuation">;</span></span>\n<span class="line">        add_header Access-Control-Allow-Credentials <span class="token boolean">true</span><span class="token punctuation">;</span></span>\n<span class="line">        location /test <span class="token punctuation">{</span></span>\n<span class="line">            default_type application/json<span class="token punctuation">;</span></span>\n<span class="line">            <span class="token builtin class-name">return</span> <span class="token number">200</span> <span class="token string">&#39;{&quot;cacheExpirationDays&quot;: 30,&quot;message&quot;: &quot;Device Valid&quot;,&quot;resultCode&quot;: &quot;GOOD&quot;}&#39;</span><span class="token punctuation">;</span></span>\n<span class="line">        <span class="token punctuation">}</span></span>\n<span class="line">        location /admin/service/registration/validateDevice <span class="token punctuation">{</span></span>\n<span class="line">            default_type application/json<span class="token punctuation">;</span></span>\n<span class="line">            <span class="token builtin class-name">return</span> <span class="token number">200</span> <span class="token string">&#39;{&quot;cacheExpirationDays&quot;: 30,&quot;message&quot;: &quot;Device Valid&quot;,&quot;resultCode&quot;: &quot;GOOD&quot;}&#39;</span><span class="token punctuation">;</span></span>\n<span class="line">        <span class="token punctuation">}</span></span>\n<span class="line">        location /admin/service/registration/validate <span class="token punctuation">{</span></span>\n<span class="line">            default_type application/json<span class="token punctuation">;</span></span>\n<span class="line">            <span class="token builtin class-name">return</span> <span class="token number">200</span> <span class="token string">&#39;{&quot;featId&quot;:&quot;&quot;,&quot;registered&quot;:true,&quot;expDate&quot;:&quot;2099-01-01&quot;,&quot;key&quot;:&quot;&quot;}&#39;</span><span class="token punctuation">;</span></span>\n<span class="line">        <span class="token punctuation">}</span></span>\n<span class="line">        location /admin/service/registration/getStatus <span class="token punctuation">{</span></span>\n<span class="line">            default_type application/json<span class="token punctuation">;</span></span>\n<span class="line">            <span class="token builtin class-name">return</span> <span class="token number">200</span> <span class="token string">&#39;{&quot;deviceStatus&quot;:&quot;0&quot;,&quot;planType&quot;:&quot;Lifetime&quot;,&quot;subscriptions&quot;:{}}&#39;</span><span class="token punctuation">;</span></span>\n<span class="line">        <span class="token punctuation">}</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',19)])])}]]),p=JSON.parse('{"path":"/guide/Emby.html","title":"Emby 伪站破解认证","lang":"zh-CN","frontmatter":{},"headers":[],"git":{"updatedTime":1768817804000,"contributors":[{"name":"womeng","username":"womeng","email":"donglongqin@qq.com","commits":3,"url":"https://github.com/womeng"}],"changelog":[{"hash":"45e2266c6929e8daa622e8878f0f0390df84197f","time":1768817804000,"email":"donglongqin@qq.com","author":"womeng","message":"emby"},{"hash":"ad4e5c5667da9dcd6fd0408903c9d7d1fab3a6d6","time":1768099586000,"email":"donglongqin@qq.com","author":"womeng","message":"Emby"},{"hash":"9826e3bb2e20ee1045924d6ca1dc4543c4cad393","time":1768098351000,"email":"donglongqin@qq.com","author":"womeng","message":"Emby"}]},"filePathRelative":"guide/Emby.md"}')}}]);